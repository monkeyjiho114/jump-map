<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="screen-orientation" content="landscape">
  <title>붕어빵 점프맵</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.svg">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet" onerror="this.remove()">
</head>
<body>
  <script src="three.min.js"></script>

  <!-- Title Screen -->
  <div id="title-screen" class="screen active">
    <div class="screen-content">
      <h1 class="game-title">붕어빵 점프맵</h1>
      <p class="game-subtitle">Bungeoppang Jump Map</p>

      <!-- Difficulty Selection -->
      <div class="difficulty-section">
        <div class="difficulty-row">
          <label class="difficulty-label">게임 난이도</label>
          <button class="diff-arrow diff-left" data-target="game" data-dir="-1">◀</button>
          <div class="difficulty-display">
            <span class="difficulty-stars" id="game-diff-stars">★★★★★</span>
            <span class="difficulty-number" id="game-diff-number">5</span>
          </div>
          <button class="diff-arrow diff-right" data-target="game" data-dir="1">▶</button>
          <span class="difficulty-desc" id="game-diff-desc">보통</span>
        </div>
        <div class="difficulty-row">
          <label class="difficulty-label">퀴즈 난이도</label>
          <button class="diff-arrow diff-left" data-target="quiz" data-dir="-1">◀</button>
          <div class="difficulty-display">
            <span class="difficulty-stars" id="quiz-diff-stars">★★★</span>
            <span class="difficulty-number" id="quiz-diff-number">3</span>
          </div>
          <button class="diff-arrow diff-right" data-target="quiz" data-dir="1">▶</button>
          <span class="difficulty-desc" id="quiz-diff-desc">기본 단어</span>
        </div>
      </div>

      <button id="start-btn" class="btn btn-primary">게임 시작</button>
      <div class="controls-hint">
        <p>방향키 이동 | Space 점프 | 마우스 카메라</p>
      </div>
    </div>
  </div>

  <!-- Character Select -->
  <div id="character-select" class="screen">
    <div class="screen-content">
      <h2>캐릭터 선택</h2>
      <div class="character-cards">
        <div class="character-card" id="pig-card">
          <canvas id="pig-preview" width="240" height="220"></canvas>
          <h3>돼지붕어빵</h3>
          <p>귀여운 돼지 얼굴의 붕어빵</p>
          <button id="pig-btn" class="btn btn-select">선택</button>
        </div>
        <div class="character-card" id="monkey-card">
          <canvas id="monkey-preview" width="240" height="220"></canvas>
          <h3>몽키붕어빵</h3>
          <p>장난꾸러기 원숭이 얼굴의 붕어빵</p>
          <button id="monkey-btn" class="btn btn-select">선택</button>
        </div>
      </div>
    </div>
  </div>

  <!-- HUD -->
  <div id="hud" class="screen">
    <div class="hud-top-left">
      <div class="hud-item" id="stage-name">스테이지 1</div>
    </div>
    <div class="hud-top-center">
      <div class="hud-item hud-timer" id="timer">00:00.00</div>
    </div>
    <div class="hud-top-right">
      <div class="hud-item">체크포인트 <span id="checkpoint-count">0/0</span></div>
      <div class="hud-item">사망 <span id="death-count">0</span></div>
    </div>
  </div>

  <!-- Pause Menu -->
  <div id="pause-menu" class="screen">
    <div class="screen-content">
      <h2>일시정지</h2>
      <button id="resume-btn" class="btn btn-primary">계속하기</button>
      <button id="restart-btn" class="btn btn-secondary">다시 시작</button>
      <button id="menu-btn" class="btn btn-secondary">메인 메뉴</button>
    </div>
  </div>

  <!-- Game Over -->
  <div id="game-over" class="screen">
    <div class="screen-content">
      <h2>게임 오버</h2>
      <button id="retry-btn" class="btn btn-primary">다시 시도</button>
    </div>
  </div>

  <!-- Stage Clear -->
  <div id="stage-clear" class="screen">
    <div class="screen-content">
      <h2 class="clear-title">스테이지 클리어!</h2>
      <div class="clear-stats">
        <p>시간: <span id="clear-time">00:00.00</span></p>
        <p>사망: <span id="clear-deaths">0</span>회</p>
      </div>
      <button id="next-stage-btn" class="btn btn-primary">다음 스테이지</button>
    </div>
  </div>

  <!-- All Clear -->
  <div id="all-clear" class="screen">
    <div class="screen-content">
      <h2 class="clear-title">축하합니다!</h2>
      <h3>모든 스테이지를 클리어했습니다!</h3>
      <div class="clear-stats">
        <p>총 시간: <span id="total-time">00:00.00</span></p>
        <p>총 사망: <span id="total-deaths">0</span>회</p>
      </div>
      <button id="all-clear-menu-btn" class="btn btn-primary">메인 메뉴</button>
    </div>
  </div>

  <!-- Quiz Screen -->
  <div id="quiz-screen" class="screen">
    <div class="screen-content quiz-content">
      <div id="quiz-emoji" class="quiz-emoji"></div>
      <div id="quiz-question" class="quiz-question"></div>
      <div id="quiz-choices" class="quiz-choices"></div>
      <button id="quiz-mic-btn" class="quiz-mic-btn">🎤 말하기</button>
      <div id="quiz-hint" class="quiz-hint"></div>
      <div id="quiz-feedback" class="quiz-feedback"></div>
    </div>
  </div>

  <!-- Pause Button (always visible during gameplay) -->
  <button id="pause-btn-touch" aria-label="메뉴">☰</button>

  <!-- Touch Controls (mobile) -->
  <div id="touch-controls">
    <div id="joystick-area">
      <div id="joystick-base">
        <div id="joystick-thumb"></div>
      </div>
    </div>
    <button id="jump-btn-touch">JUMP</button>
  </div>

  <!-- Game Container -->
  <div id="game-container"></div>

  <script src="sound.js"></script>
  <script src="characters.js"></script>
  <script src="levels.js"></script>
  <script src="input.js"></script>
  <script src="quiz-tier7.js"></script>
  <script src="quiz-tier8.js"></script>
  <script src="quiz-tier9.js"></script>
  <script src="quiz-tier10.js"></script>
  <script src="quiz-data.js"></script>
  <script src="quiz-manager.js"></script>
  <script src="game.js"></script>
</body>
</html>
